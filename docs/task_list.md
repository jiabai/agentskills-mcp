# AgentSkills MCP å¤šç”¨æˆ·WebæœåŠ¡æ”¹é€  - ä»»åŠ¡åˆ—è¡¨

> æœ¬æ–‡æ¡£å®šä¹‰äº†é¡¹ç›®æ”¹é€ çš„è¯¦ç»†ä»»åŠ¡åˆ†è§£ï¼ŒæŒ‰é˜¶æ®µå’Œä¼˜å…ˆçº§ç»„ç»‡ã€‚

---

## Phase 1: åŸºç¡€è®¾æ–½æ­å»º

### 1.1 é¡¹ç›®é…ç½®

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T1.1.1 | åˆ›å»ºé…ç½®æ¨¡å— | åˆ›å»º `config/settings.py`ï¼Œå®šä¹‰ Pydantic Settings | æ—  | â¬œ |
| T1.1.2 | æ›´æ–°ä¾èµ–é…ç½® | æ›´æ–° `pyproject.toml`ï¼Œæ·»åŠ æ–°ä¾èµ– | T1.1.1 | â¬œ |
| T1.1.3 | åˆ›å»ºç¯å¢ƒå˜é‡æ¨¡æ¿ | åˆ›å»º `.env.example` æ–‡ä»¶ | T1.1.1 | â¬œ |
| T1.1.4 | æ‰©å±• default.yaml | æ·»åŠ ç”¨æˆ·éš”ç¦»ç›¸å…³é…ç½® | T1.1.1 | â¬œ |

### 1.2 æ•°æ®åº“å±‚

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T1.2.1 | åˆ›å»ºæ•°æ®åº“ä¼šè¯æ¨¡å— | åˆ›å»º `db/session.py`ï¼Œé…ç½®å¼‚æ­¥å¼•æ“ | T1.1.1 | â¬œ |
| T1.2.2 | åˆ›å»ºåŸºç¡€æ¨¡å‹ | åˆ›å»º `models/base.py`ï¼Œå®šä¹‰ Base å’Œ Mixin | T1.2.1 | â¬œ |
| T1.2.3 | åˆ›å»º User æ¨¡å‹ | åˆ›å»º `models/user.py` | T1.2.2 | â¬œ |
| T1.2.4 | åˆ›å»º Skill æ¨¡å‹ | åˆ›å»º `models/skill.py` | T1.2.2 | â¬œ |
| T1.2.5 | åˆ›å»º APIToken æ¨¡å‹ | åˆ›å»º `models/token.py` | T1.2.2 | â¬œ |
| T1.2.6 | åˆ›å»ºæ¨¡å‹å¯¼å‡º | åˆ›å»º `models/__init__.py` | T1.2.3-T1.2.5 | â¬œ |
| T1.2.7 | é…ç½® Alembic | åˆå§‹åŒ–æ•°æ®åº“è¿ç§» | T1.2.6 | â¬œ |
| T1.2.8 | åˆ›å»ºåˆå§‹è¿ç§» | ç”Ÿæˆåˆå§‹æ•°æ®åº“è¡¨è¿ç§»è„šæœ¬ | T1.2.7 | â¬œ |

### 1.3 Pydantic Schemas

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T1.3.1 | åˆ›å»ºé€šç”¨å“åº” Schema | åˆ›å»º `schemas/response.py` | æ—  | â¬œ |
| T1.3.2 | åˆ›å»º User Schema | åˆ›å»º `schemas/user.py` | T1.2.3 | â¬œ |
| T1.3.3 | åˆ›å»º Skill Schema | åˆ›å»º `schemas/skill.py` | T1.2.4 | â¬œ |
| T1.3.4 | åˆ›å»º Token Schema | åˆ›å»º `schemas/token.py` | T1.2.5 | â¬œ |
| T1.3.5 | åˆ›å»º Schema å¯¼å‡º | åˆ›å»º `schemas/__init__.py` | T1.3.1-T1.3.4 | â¬œ |

---

## Phase 2: å®‰å…¨ä¸è®¤è¯æ¨¡å—

### 2.1 å®‰å…¨å·¥å…·

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T2.1.1 | åˆ›å»ºå¯†ç å“ˆå¸Œæ¨¡å— | åˆ›å»º `core/security/password.py` | æ—  | â¬œ |
| T2.1.2 | åˆ›å»º JWT å·¥å…· | åˆ›å»º `core/security/jwt.py` | T1.1.1 | â¬œ |
| T2.1.3 | åˆ›å»º API Token å·¥å…· | åˆ›å»º `core/security/token.py` | æ—  | â¬œ |
| T2.1.4 | åˆ›å»ºå®‰å…¨æ¨¡å—å¯¼å‡º | åˆ›å»º `core/security/__init__.py` | T2.1.1-T2.1.3 | â¬œ |

### 2.2 è®¤è¯ä¸­é—´ä»¶

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T2.2.1 | åˆ›å»º JWT è®¤è¯ä¸­é—´ä»¶ | åˆ›å»º `core/middleware/auth.py` | T2.1.2 | â¬œ |
| T2.2.2 | åˆ›å»º MCP Token è®¤è¯ | åˆ›å»º `api/mcp/auth.py` | T2.1.3 | â¬œ |
| T2.2.3 | åˆ›å»ºä¸­é—´ä»¶å¯¼å‡º | åˆ›å»º `core/middleware/__init__.py` | T2.2.1 | â¬œ |

### 2.3 Repository å±‚

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T2.3.1 | åˆ›å»ºåŸºç¡€ Repository | åˆ›å»º `repositories/base.py` | T1.2.1 | â¬œ |
| T2.3.2 | åˆ›å»º User Repository | åˆ›å»º `repositories/user.py` | T2.3.1, T1.2.3 | â¬œ |
| T2.3.3 | åˆ›å»º Skill Repository | åˆ›å»º `repositories/skill.py` | T2.3.1, T1.2.4 | â¬œ |
| T2.3.4 | åˆ›å»º Token Repository | åˆ›å»º `repositories/token.py` | T2.3.1, T1.2.5 | â¬œ |
| T2.3.5 | åˆ›å»º Repository å¯¼å‡º | åˆ›å»º `repositories/__init__.py` | T2.3.1-T2.3.4 | â¬œ |

### 2.4 Service å±‚

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T2.4.1 | åˆ›å»ºè®¤è¯æœåŠ¡ | åˆ›å»º `services/auth.py` | T2.1.1, T2.1.2, T2.3.2 | â¬œ |
| T2.4.2 | åˆ›å»ºç”¨æˆ·æœåŠ¡ | åˆ›å»º `services/user.py` | T2.3.2 | â¬œ |
| T2.4.3 | åˆ›å»º Token æœåŠ¡ | åˆ›å»º `services/token.py` | T2.1.3, T2.3.4 | â¬œ |
| T2.4.4 | åˆ›å»º Service å¯¼å‡º | åˆ›å»º `services/__init__.py` | T2.4.1-T2.4.3 | â¬œ |

---

## Phase 3: API æ¥å£å®ç°

### 3.1 ä¾èµ–æ³¨å…¥

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T3.1.1 | åˆ›å»ºä¾èµ–æ³¨å…¥æ¨¡å— | åˆ›å»º `api/deps.py` | T2.2.1, T2.2.2 | â¬œ |

### 3.2 è®¤è¯ API

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T3.2.1 | å®ç°æ³¨å†Œæ¥å£ | POST /api/v1/auth/register | T2.4.1, T3.1.1 | â¬œ |
| T3.2.2 | å®ç°ç™»å½•æ¥å£ | POST /api/v1/auth/login | T2.4.1, T3.1.1 | â¬œ |
| T3.2.3 | å®ç°åˆ·æ–°Tokenæ¥å£ | POST /api/v1/auth/refresh | T2.4.1, T3.1.1 | â¬œ |
| T3.2.4 | åˆ›å»ºè®¤è¯è·¯ç”± | åˆ›å»º `api/v1/auth.py` | T3.2.1-T3.2.3 | â¬œ |

### 3.3 ç”¨æˆ· API

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T3.3.1 | å®ç°è·å–å½“å‰ç”¨æˆ· | GET /api/v1/users/me | T2.4.2, T3.1.1 | â¬œ |
| T3.3.2 | å®ç°æ›´æ–°ç”¨æˆ·ä¿¡æ¯ | PUT /api/v1/users/me | T2.4.2, T3.1.1 | â¬œ |
| T3.3.3 | å®ç°åˆ é™¤è´¦æˆ· | DELETE /api/v1/users/me | T2.4.2, T3.1.1 | â¬œ |
| T3.3.4 | å®ç°ä¿®æ”¹å¯†ç  | PUT /api/v1/users/me/password | T2.4.2, T3.1.1 | â¬œ |
| T3.3.5 | åˆ›å»ºç”¨æˆ·è·¯ç”± | åˆ›å»º `api/v1/users.py` | T3.3.1-T3.3.4 | â¬œ |

### 3.4 Token API

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T3.4.1 | å®ç°åˆ—å‡ºToken | GET /api/v1/tokens | T2.4.3, T3.1.1 | â¬œ |
| T3.4.2 | å®ç°åˆ›å»ºToken | POST /api/v1/tokens | T2.4.3, T3.1.1 | â¬œ |
| T3.4.3 | å®ç°åˆ é™¤Token | DELETE /api/v1/tokens/{token_id} | T2.4.3, T3.1.1 | â¬œ |
| T3.4.4 | åˆ›å»ºTokenè·¯ç”± | åˆ›å»º `api/v1/tokens.py` | T3.4.1-T3.4.3 | â¬œ |

### 3.5 Skill æœåŠ¡ä¸ API

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T3.5.1 | åˆ›å»º Skill å­˜å‚¨å·¥å…· | åˆ›å»º `core/utils/skill_storage.py` | T1.1.1 | â¬œ |
| T3.5.2 | åˆ›å»º Skill æœåŠ¡ | åˆ›å»º `services/skill.py` | T2.3.3, T3.5.1 | â¬œ |
| T3.5.3 | å®ç°åˆ—å‡ºSkills | GET /api/v1/skills | T3.5.2, T3.1.1 | â¬œ |
| T3.5.4 | å®ç°åˆ›å»ºSkill | POST /api/v1/skills | T3.5.2, T3.1.1 | â¬œ |
| T3.5.5 | å®ç°è·å–Skillè¯¦æƒ… | GET /api/v1/skills/{skill_id} | T3.5.2, T3.1.1 | â¬œ |
| T3.5.6 | å®ç°æ›´æ–°Skill | PUT /api/v1/skills/{skill_id} | T3.5.2, T3.1.1 | â¬œ |
| T3.5.7 | å®ç°åˆ é™¤Skill | DELETE /api/v1/skills/{skill_id} | T3.5.2, T3.1.1 | â¬œ |
| T3.5.8 | å®ç°ä¸Šä¼ Skillæ–‡ä»¶ | POST /api/v1/skills/upload | T3.5.2, T3.1.1 | â¬œ |
| T3.5.9 | å®ç°åˆ—å‡ºSkillæ–‡ä»¶ | GET /api/v1/skills/{skill_id}/files | T3.5.2, T3.1.1 | â¬œ |
| T3.5.10 | åˆ›å»ºSkillè·¯ç”± | åˆ›å»º `api/v1/skills.py` | T3.5.3-T3.5.9 | â¬œ |

### 3.6 è·¯ç”±æ±‡æ€»

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T3.6.1 | åˆ›å»ºAPIè·¯ç”±æ±‡æ€» | åˆ›å»º `api/router.py` | T3.2.4, T3.3.5, T3.4.4, T3.5.10 | â¬œ |
| T3.6.2 | åˆ›å»ºAPIæ¨¡å—å¯¼å‡º | åˆ›å»º `api/__init__.py` | T3.6.1 | â¬œ |
| T3.6.3 | åˆ›å»ºv1æ¨¡å—å¯¼å‡º | åˆ›å»º `api/v1/__init__.py` | T3.2.4, T3.3.5, T3.4.4, T3.5.10 | â¬œ |

---

## Phase 4: MCP æœåŠ¡é›†æˆ

### 4.1 MCP å·¥å…·æ”¹é€ 

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T4.1.1 | æ”¹é€  LoadSkillOp | æ”¯æŒç”¨æˆ·éš”ç¦» | T1.1.1 | â¬œ |
| T4.1.2 | æ”¹é€  LoadSkillMetadataOp | æ”¯æŒç”¨æˆ·éš”ç¦» | T1.1.1 | â¬œ |
| T4.1.3 | æ”¹é€  ReadReferenceFileOp | æ”¯æŒç”¨æˆ·éš”ç¦» | T1.1.1 | â¬œ |
| T4.1.4 | æ”¹é€  RunShellCommandOp | æ”¯æŒç”¨æˆ·éš”ç¦» | T1.1.1 | â¬œ |

### 4.2 MCP æœåŠ¡

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T4.2.1 | åˆ›å»º MCP æœåŠ¡ | åˆ›å»º `services/mcp.py` | T4.1.1-T4.1.4 | â¬œ |
| T4.2.2 | åˆ›å»º HTTP MCP å¤„ç†å™¨ | åˆ›å»º `api/mcp/http_handler.py` | T4.2.1, T2.2.2 | â¬œ |
| T4.2.3 | åˆ›å»º SSE MCP å¤„ç†å™¨ | åˆ›å»º `api/mcp/sse_handler.py` | T4.2.1, T2.2.2 | â¬œ |
| T4.2.4 | åˆ›å»º MCP æ¨¡å—å¯¼å‡º | åˆ›å»º `api/mcp/__init__.py` | T4.2.2, T4.2.3 | â¬œ |

---

## Phase 5: åº”ç”¨å…¥å£ä¸éƒ¨ç½²

### 5.1 FastAPI åº”ç”¨

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T5.1.1 | åˆ›å»º FastAPI å…¥å£ | æ›´æ–° `main.py` | T3.6.1, T4.2.4 | â¬œ |
| T5.1.2 | æ·»åŠ  CORS ä¸­é—´ä»¶ | é…ç½®è·¨åŸŸæ”¯æŒ | T5.1.1 | â¬œ |
| T5.1.3 | æ·»åŠ å¥åº·æ£€æŸ¥ç«¯ç‚¹ | GET /health | T5.1.1 | â¬œ |
| T5.1.4 | åˆ›å»ºåº”ç”¨å·¥å‚å‡½æ•° | create_application() | T5.1.1 | â¬œ |

### 5.2 éƒ¨ç½²é…ç½®

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T5.2.1 | åˆ›å»º Dockerfile | Docker é•œåƒæ„å»ºé…ç½® | T5.1.1 | â¬œ |
| T5.2.2 | åˆ›å»º docker-compose.yml | å®Œæ•´éƒ¨ç½²é…ç½® | T5.2.1 | â¬œ |
| T5.2.3 | åˆ›å»º .dockerignore | Docker æ„å»ºå¿½ç•¥æ–‡ä»¶ | T5.2.1 | â¬œ |
| T5.2.4 | åˆ›å»ºå¯åŠ¨è„šæœ¬ | åˆ›å»ºå¯åŠ¨å‘½ä»¤è„šæœ¬ | T5.1.1 | â¬œ |

---

## Phase 6: æµ‹è¯•

### 6.1 æµ‹è¯•é…ç½®

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T6.1.1 | åˆ›å»ºæµ‹è¯•é…ç½® | åˆ›å»º `tests/conftest.py` | T5.1.1 | â¬œ |
| T6.1.2 | åˆ›å»ºæµ‹è¯•æ•°æ®åº“é…ç½® | é…ç½®å†…å­˜ SQLite | T6.1.1 | â¬œ |

### 6.2 å•å…ƒæµ‹è¯•

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T6.2.1 | æµ‹è¯•å¯†ç å·¥å…· | æµ‹è¯• `core/security/password.py` | T2.1.1 | â¬œ |
| T6.2.2 | æµ‹è¯• JWT å·¥å…· | æµ‹è¯• `core/security/jwt.py` | T2.1.2 | â¬œ |
| T6.2.3 | æµ‹è¯• Token å·¥å…· | æµ‹è¯• `core/security/token.py` | T2.1.3 | â¬œ |
| T6.2.4 | æµ‹è¯•è®¤è¯æœåŠ¡ | æµ‹è¯• `services/auth.py` | T2.4.1 | â¬œ |
| T6.2.5 | æµ‹è¯•ç”¨æˆ·æœåŠ¡ | æµ‹è¯• `services/user.py` | T2.4.2 | â¬œ |
| T6.2.6 | æµ‹è¯• Skill æœåŠ¡ | æµ‹è¯• `services/skill.py` | T3.5.2 | â¬œ |

### 6.3 é›†æˆæµ‹è¯•

| ID | ä»»åŠ¡ | æè¿° | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|
| T6.3.1 | æµ‹è¯•è®¤è¯ API | æµ‹è¯• `/api/v1/auth/*` | T3.2.4 | â¬œ |
| T6.3.2 | æµ‹è¯•ç”¨æˆ· API | æµ‹è¯• `/api/v1/users/*` | T3.3.5 | â¬œ |
| T6.3.3 | æµ‹è¯• Token API | æµ‹è¯• `/api/v1/tokens/*` | T3.4.4 | â¬œ |
| T6.3.4 | æµ‹è¯• Skill API | æµ‹è¯• `/api/v1/skills/*` | T3.5.10 | â¬œ |
| T6.3.5 | æµ‹è¯• MCP API | æµ‹è¯• `/mcp` å’Œ `/sse` | T4.2.4 | â¬œ |

---

## ä»»åŠ¡ç»Ÿè®¡

| é˜¶æ®µ | ä»»åŠ¡æ•° | æè¿° |
|------|--------|------|
| Phase 1 | 17 | åŸºç¡€è®¾æ–½æ­å»º |
| Phase 2 | 16 | å®‰å…¨ä¸è®¤è¯æ¨¡å— |
| Phase 3 | 24 | API æ¥å£å®ç° |
| Phase 4 | 8 | MCP æœåŠ¡é›†æˆ |
| Phase 5 | 8 | åº”ç”¨å…¥å£ä¸éƒ¨ç½² |
| Phase 6 | 13 | æµ‹è¯• |
| **æ€»è®¡** | **86** | |

---

## æ‰§è¡Œé¡ºåºå»ºè®®

```
Phase 1 (åŸºç¡€è®¾æ–½)
    â”‚
    â”œâ”€â”€ T1.1.x (é…ç½®) â”€â”€â”¬â”€â”€ T1.2.x (æ•°æ®åº“)
    â”‚                   â”‚
    â”‚                   â””â”€â”€ T1.3.x (Schemas)
    â”‚
Phase 2 (å®‰å…¨è®¤è¯)
    â”‚
    â”œâ”€â”€ T2.1.x (å®‰å…¨å·¥å…·) â”€â”€â”¬â”€â”€ T2.2.x (ä¸­é—´ä»¶)
    â”‚                       â”‚
    â”‚                       â””â”€â”€ T2.3.x (Repository)
    â”‚                                   â”‚
    â”‚                                   â””â”€â”€ T2.4.x (Service)
    â”‚
Phase 3 (API)
    â”‚
    â”œâ”€â”€ T3.1.x (ä¾èµ–æ³¨å…¥)
    â”‚       â”‚
    â”‚       â”œâ”€â”€ T3.2.x (è®¤è¯API)
    â”‚       â”œâ”€â”€ T3.3.x (ç”¨æˆ·API)
    â”‚       â”œâ”€â”€ T3.4.x (TokenAPI)
    â”‚       â””â”€â”€ T3.5.x (Skill API)
    â”‚               â”‚
    â”‚               â””â”€â”€ T3.6.x (è·¯ç”±æ±‡æ€»)
    â”‚
Phase 4 (MCPé›†æˆ)
    â”‚
    â”œâ”€â”€ T4.1.x (å·¥å…·æ”¹é€ )
    â”‚       â”‚
    â”‚       â””â”€â”€ T4.2.x (MCPæœåŠ¡)
    â”‚
Phase 5 (éƒ¨ç½²)
    â”‚
    â”œâ”€â”€ T5.1.x (FastAPIå…¥å£)
    â”‚       â”‚
    â”‚       â””â”€â”€ T5.2.x (éƒ¨ç½²é…ç½®)
    â”‚
Phase 6 (æµ‹è¯•)
    â”‚
    â”œâ”€â”€ T6.1.x (æµ‹è¯•é…ç½®)
    â”‚       â”‚
    â”‚       â”œâ”€â”€ T6.2.x (å•å…ƒæµ‹è¯•)
    â”‚       â””â”€â”€ T6.3.x (é›†æˆæµ‹è¯•)
```

---

## çŠ¶æ€è¯´æ˜

| çŠ¶æ€ | ç¬¦å· | æè¿° |
|------|------|------|
| æœªå¼€å§‹ | â¬œ | ä»»åŠ¡å°šæœªå¼€å§‹ |
| è¿›è¡Œä¸­ | ğŸ”µ | ä»»åŠ¡æ­£åœ¨è¿›è¡Œ |
| å·²å®Œæˆ | âœ… | ä»»åŠ¡å·²å®Œæˆ |
| å·²éªŒè¯ | âœ”ï¸ | ä»»åŠ¡å·²å®Œæˆå¹¶é€šè¿‡éªŒè¯ |
| é˜»å¡ | ğŸ”´ | ä»»åŠ¡è¢«é˜»å¡ |
